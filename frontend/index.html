<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Video Uploader (MongoDB GridFS)</title>
  <link rel="stylesheet" href="/styles.css" />
  <!-- à¹ƒà¸ªà¹ˆ favicon.ico à¹ƒà¸™ /frontend à¸–à¹‰à¸²à¸¡à¸µ -->
  <link rel="icon" href="/favicon.ico">
</head>
<body>
  <header class="container">
    <h1>ðŸ“¹ MongoDB GridFS Video</h1>
  </header>

  <main class="container">
    <!-- Upload -->
    <section class="card">
      <h2>Upload a Video</h2>
      <form id="uploadForm">
        <div class="grid">
          <label>Title
            <input type="text" name="title" placeholder="My clip" required />
          </label>
          <label>Visibility
            <select name="visibility">
              <option value="public">Public</option>
              <option value="private">Private</option>
            </select>
          </label>
        </div>

        <label>Description
          <textarea name="description" rows="3" placeholder="Short description..."></textarea>
        </label>

        <label>Tags (comma separated)
          <input type="text" name="tags" placeholder="music, tutorial" />
        </label>

        <label>Poster URL (optional)
          <input type="url" name="posterUrl" placeholder="https://.../poster.jpg" />
        </label>

        <label>Video File
          <input type="file" name="file" accept="video/mp4,video/webm,video/ogg" required />
        </label>

        <button type="submit">Upload</button>
        <div id="uploadMsg" class="muted" style="margin-top:8px;"></div>

        <!-- Progress Bar + Speed + ETA + Cancel -->
        <div class="row" id="uploadProgressRow" style="display:none; align-items:center; gap:10px; margin-top:10px;">
          <progress id="uploadProgress" value="0" max="100" style="width:60%"></progress>
          <span id="uploadPercent" class="muted" style="min-width:60px; text-align:right;">0%</span>
          <span id="uploadSpeed" class="muted" style="min-width:120px;">0 MB/s</span>
          <span id="uploadEta" class="muted" style="min-width:120px;">ETA --:--</span>
          <button type="button" id="cancelUploadBtn" class="danger">Cancel</button>
        </div>
      </form>
    </section>

    <!-- List -->
    <section class="card">
      <h2>Videos</h2>
      <div class="controls">
        <input id="search" placeholder="Search..." />
        <select id="visibilityFilter">
          <option value="public">Public</option>
          <option value="private">Private</option>
        </select>
        <button id="refreshBtn">Refresh</button>
      </div>
      <div id="list" class="list"></div>
    </section>
  </main>

  <!-- Player Dialog -->
  <dialog id="playerDialog">
    <div class="dialog-body">
      <button class="close" id="closeDialog">Ã—</button>
      <h3 id="dlgTitle"></h3>
      <video id="dlgVideo" controls preload="metadata" width="100%"></video>
      <p id="dlgDesc" class="muted"></p>
      <div class="row">
        <a id="openWatch" class="button" target="_blank">Open Watch Page</a>
        <button id="deleteBtn" class="danger">Delete</button>
      </div>
    </div>
  </dialog>

  <script src="/app.js"></script>
</body>
</html>
